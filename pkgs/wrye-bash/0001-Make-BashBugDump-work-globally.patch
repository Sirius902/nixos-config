From 983b2235d85c894567e4b5dfb69adeb9b081a172 Mon Sep 17 00:00:00 2001
From: Infernio <infernio@icloud.com>
Date: Sat, 10 Jun 2023 10:55:46 +0200
Subject: [PATCH 1/3] Make BashBugDump work globally

Store logs in cache and follow XDG standard.

Edited-by: Sirius902 <10891979+Sirius902@users.noreply.github.com>
---
 Mopy/bash/bash.py | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/Mopy/bash/bash.py b/Mopy/bash/bash.py
index 8f2ca1e50..bb91ef3c2 100644
--- a/Mopy/bash/bash.py
+++ b/Mopy/bash/bash.py
@@ -84,7 +84,11 @@ def _print(s):
     if pathToProg:
         os.chdir(pathToProg)
     global _bugdump_handle
-    _bugdump_handle = open(os.path.join(os.getcwd(), 'BashBugDump.log'), 'w',
+    bugdump_base = (os.getcwd() if bolt.os_name == 'nt' else
+                    os.path.join(os.getenv('XDG_CACHE_HOME') or
+                    os.path.expanduser('~/.cache'), 'wrye-bash'))
+    os.makedirs(bugdump_base, exist_ok=True)
+    _bugdump_handle = open(os.path.join(bugdump_base, 'BashBugDump.log'), 'w',
         buffering=1, encoding='utf-8')
     _install_bugdump()
 
-- 
2.51.2

